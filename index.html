<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI vs Human Music Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
      background: #f2f2f2;
    }
    h1 {
      font-size: 2em;
      margin-bottom: 20px;
    }
    #quizContainer, #summaryContainer {
      display: none;
      margin-top: 20px;
      padding: 10px;
    }
    button {
      padding: 15px 30px;
      margin: 10px;
      font-size: 1em;
      cursor: pointer;
      border: none;
      border-radius: 5px;
      background-color: #007BFF;
      color: #fff;
      transition: background-color 0.3s ease;
    }
    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    .answerBtn {
      width: 80%;
      max-width: 300px;
    }
    .red {
      background-color: red !important;
      color: white;
    }
    .green {
      background-color: green !important;
      color: white;
    }
    audio {
      width: 100%;
      max-width: 400px;
      margin-top: 20px;
    }
    @media (min-width: 600px) {
      button {
        font-size: 1.1em;
      }
    }
    #feedback {
      font-size: 20px;
      margin-top: 10px;
      height: 30px;
    }
  </style>
</head>
<body>

  <h1>AI vs Human Music Quiz</h1>
  <button id="startBtn">Start Quiz</button>
  
  <div id="quizContainer">
    <h2 id="questionNumber">Question 1 of 12</h2>
    <!-- Audio player for the MP3 file -->
    <audio id="audioPlayer" controls>
      Your browser does not support the audio element.
    </audio>
    <div>
      <!-- Answer buttons -->
      <button class="answerBtn" id="btnAI" onclick="answerClicked('AI')">AI Generated</button>
      <button class="answerBtn" id="btnHuman" onclick="answerClicked('Human')">Human Created</button>
    </div>
      <div id="feedback"></div>
      <button class="btn btn-next" id="btn-next" style="display:none;">Next Question</button>
  </div>
  
  <div id="summaryContainer">
    <h2>Quiz Summary</h2>
    <p id="scoreSummary"></p>
  </div>

  <script>
    // Define the quiz questions. Replace the src values with your actual MP3 file URLs.
    // For each question, specify the actual entry names in your Google Form, path to the MP3 file and the correct answer.
    // The correctAnswer should be either 'AI' or 'Human'
    const questions = [
      { entry: "1771676426", src: "audio/01.mp3", correctAnswer: "AI", description: "Classical music 1 generated by AI" },
      { entry: "426693203", src: "audio/02.mp3", correctAnswer: "Human", description: "Mozart's The Marriage of Figaro (Classical music)" },
      { entry: "1290972431", src: "audio/03.mp3", correctAnswer: "Human", description: "Mozart's Clarinet Concerto in B Flat Major (Classical music)" },
      { entry: "1714390185", src: "audio/04.mp3", correctAnswer: "AI", description: "Classical music 2 generated by AI" },
      { entry: "2063547000", src: "audio/05.mp3", correctAnswer: "Human", description: "Glen Gray's Begin the Beguine (Instrumental Jazz music)" },
      { entry: "1562044592", src: "audio/06.mp3", correctAnswer: "AI", description: "Instrumental Jazz music 1 generated by AI" },
      { entry: "385612722", src: "audio/07.mp3", correctAnswer: "AI", description: "Instrumental Jazz music 2 generated by AI" },
      { entry: "441959902", src: "audio/08.mp3", correctAnswer: "Human", description: "Big Band's Late Night (Instrumental Jazz music)" },
      { entry: "716992196", src: "audio/09.mp3", correctAnswer: "Human", description: "Capturez' Midnight Cruiser (Techno music)" },
      { entry: "1899947775", src: "audio/10.mp3", correctAnswer: "AI", description: "Techno music 1 generated by AI" },
      { entry: "966197334", src: "audio/11.mp3", correctAnswer: "Human", description: "Mixkit's Techno Fest Feel (Techno music)" },
      { entry: "2119195710", src: "audio/12.mp3", correctAnswer: "AI", description: "Techno music 2 generated by AI" }
    ];
    
    let currentQuestionIndex = 0;
    let correctCount = 0;
    let responses = [];  // Store each response for later sending

    const startBtn = document.getElementById('startBtn');
    const quizContainer = document.getElementById('quizContainer');
    const summaryContainer = document.getElementById('summaryContainer');
    const questionNumber = document.getElementById('questionNumber');
    const audioPlayer = document.getElementById('audioPlayer');
    const btnAI = document.getElementById('btnAI');
    const btnHuman = document.getElementById('btnHuman');
    const feedbackEl = document.getElementById("feedback");
    const scoreSummary = document.getElementById('scoreSummary');

    // Start the quiz when the "Start Quiz" button is clicked.
    startBtn.addEventListener('click', function() {
      startBtn.style.display = 'none';
      quizContainer.style.display = 'block';
      loadQuestion();
    });

    // Load the current question's MP3 and update the display.
    function loadQuestion() {
      feedbackEl.textContent = "";
      // Update question number display.
      questionNumber.textContent = `Question ${currentQuestionIndex + 1} of ${questions.length}`;
      // Reset button colors.
      btnAI.classList.remove('red');
      btnAI.classList.remove('green');
      btnHuman.classList.remove('red');
      btnHuman.classList.remove('green');
      // Set the audio source.
      audioPlayer.src = questions[currentQuestionIndex].src;
      audioPlayer.load();
      // Optionally autoplay:
      audioPlayer.play().catch(error => {
        // Autoplay might be blocked; user may have to click play.
        console.log("Autoplay blocked:", error);
      });
    }

    // Handle answer button clicks.
    function answerClicked(answer) {
      // Stop the audio immediately.
      audioPlayer.pause();
      audioPlayer.currentTime = 0;
      // Disable both buttons to prevent multiple clicks.
      btnAI.disabled = true;
      btnHuman.disabled = true;

      const currentQuestion = questions[currentQuestionIndex];
      let chosenBtn = (answer === 'AI') ? btnAI : btnHuman;

      // Check answer and provide feedback.
	  let isCorrect = (answer === currentQuestion.correctAnswer);
      if (isCorrect ) {
        correctCount++;
        // Mark the chosen button green if the answer is correct.
        chosenBtn.classList.add('green');
        feedbackEl.textContent = "Correct!";
        feedbackEl.style.color = "green";
      } else {
        // Mark the chosen button red if the answer is incorrect.
        chosenBtn.classList.add('red');
        feedbackEl.textContent = "Incorrect!";
        feedbackEl.style.color = "red";
      }
      // Save the result for this question.
      responses.push({
        entry: currentQuestion.entry,
		description: currentQuestion.description,
        answer: answer,
        correctAnswer: currentQuestion.correctAnswer,
        correct: isCorrect
      });

      // Wait a moment so the user can see the feedback, then move on.
      setTimeout(() => {
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
          // Re-enable buttons and load the next question.
          btnAI.disabled = false;
          btnHuman.disabled = false;
          loadQuestion();
        } else {
          // Quiz finished.
          showSummary();
          sendResultsToGoogleForm();
        }
      }, 1000);
    }

    // Display the summary of the quiz.
    function showSummary() {
      quizContainer.style.display = 'none';
      summaryContainer.style.display = 'block';
      let summaryHTML = `<p>You got ${correctCount} out of ${questions.length} correct.</p>`;
      summaryHTML += "<ol>";
      responses.forEach(res => {
        summaryHTML += `<li>${res.description}: You answered <strong>${res.answer}</strong> - ${res.correct ? "<span style='color:green'>Correct</span>" : "<span style='color:red'>Incorrect</span>"}</li>`;
      });
      summaryHTML += "</ol>";
      scoreSummary.innerHTML = summaryHTML;
    }

    // Send the results to a Google Form via a POST request.
    function sendResultsToGoogleForm() {
      // Replace this URL with your own Google Form URL (the 'formResponse' endpoint)
      const googleFormURL = "https://docs.google.com/forms/d/e/1FAIpQLScwq1Wy913qtHOUVwZxYEzKWX7hsCHZQVgqEKnZodyCrH07GQ/formResponse";

      // Prepare the data. You might want to JSON-stringify the responses.
      const formData = new FormData();
      responses.forEach((res) => {
        formData.append("entry."+res.entry, res.answer);
      });

      // Use fetch to send the POST request. Note: 'no-cors' mode is used because Google Forms does not return CORS headers.
      fetch(googleFormURL, {
        method: 'POST',
        mode: 'no-cors',
        body: formData
      })
      .then(() => {
        console.log('Results sent to Google Form.');
      })
      .catch((error) => {
        console.error('Error sending results:', error);
      });
    }
  </script>

</body>
</html>
